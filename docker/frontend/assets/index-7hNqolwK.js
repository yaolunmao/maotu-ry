import{s as w,g as M}from"./project-RGje6Uw9.js";import{a as x,u as y,r as o,G as R,H as k,o as J,c as O,h as r,w as f,i as c,ad as P,ae as C,af as E,ac as S}from"./index-F5mM8V04.js";/* empty css              */import{_ as N}from"./device-bind.vue_vue_type_script_setup_true_lang-zxm9liHq.js";const V={style:{width:"100%",height:"100vh"}},z={__name:"index",setup(I){const v=x(),g=y(),n=o(),p=o(),s=o(""),d=o({}),u=o(!0),i=o(!1),_=()=>{console.log("点击了返回按钮"),v.go(-1)},m=e=>{d.value=JSON.parse(JSON.stringify(e)),i.value=!0},h=e=>{console.log("点击了保存按钮，可以在此处将图存到数据库",e),w({projectId:s.value,dataModel:JSON.stringify(e)}).then(t=>{S.success("保存成功！")})},j=()=>{M(s.value).then(e=>{var t,a;e.data.dataModel?(t=n.value)==null||t.setImportJson(JSON.parse(e.data.dataModel)):(a=n.value)==null||a.setImportJson({canvasCfg:{width:1920,height:1080,scale:1,color:"",img:"",guide:!0,adsorp:!0,adsorp_diff:3,transform_origin:{x:0,y:0},drag_offset:{x:0,y:0}},gridCfg:{enabled:!0,align:!0,size:10},json:[]}),u.value=!1})};return s.value=g.query.project_id,j(),(e,t)=>{const a=R("loading");return k((J(),O("div",V,[r(c(P),{ref_key:"MtEditRef",ref:n,onOnReturnClick:_,onOnSaveClick:h,onOnPreviewClick:m},{deviceBind:f(({item:l})=>[r(N,{"hand-item-info":l,"project-id":s.value},null,8,["hand-item-info","project-id"])]),_:1},512),r(c(E),{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=l=>i.value=l),title:"预览",fullscreen:"","destroy-on-close":""},{default:f(()=>[r(c(C),{"export-json":d.value,ref_key:"MtPreviewRef",ref:p},null,8,["export-json"])]),_:1},8,["modelValue"])])),[[a,u.value]])}}};export{z as default};
