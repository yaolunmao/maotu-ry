import{l as E,c as T,a as q,b as z,d as G,e as J}from"./cache-nB2RrlLv.js";import{d as M,r as d,f as c,H as P,o as v,c as Q,h as e,w as a,i as n,k as R,I as S,n as W,l as w,F as X}from"./index-_GLIFr1R.js";const Y={class:"app-container"},Z=w("span",null,"缓存列表",-1),ee=w("span",null,"键名列表",-1),ae=w("span",null,"缓存内容",-1),te=X({name:"CacheList"}),ce=Object.assign(te,{setup(le){const{proxy:h}=M(),b=d([]),k=d([]),s=d({}),f=d(!0),_=d(!1),m=d(""),N=d(window.innerHeight-200);function V(){f.value=!0,E().then(l=>{b.value=l.data,f.value=!1})}function B(){V(),h.$modal.msgSuccess("刷新缓存列表成功")}function D(l){T(l.cacheName).then(t=>{h.$modal.msgSuccess("清理缓存名称["+m.value+"]成功"),p()})}function p(l){const t=l!==void 0?l.cacheName:m.value;t!==""&&(_.value=!0,q(t).then(r=>{k.value=r.data,_.value=!1,m.value=t}))}function F(){p(),h.$modal.msgSuccess("刷新键名列表成功")}function O(l){z(l).then(t=>{h.$modal.msgSuccess("清理缓存键名["+l+"]成功"),p()})}function H(l){return l.cacheName.replace(":","")}function U(l){return l.replace(m.value,"")}function A(l){G(m.value,l).then(t=>{s.value=t.data})}function I(){J().then(l=>{h.$modal.msgSuccess("清理全部缓存成功")})}return V(),(l,t)=>{const r=c("el-button"),i=c("el-table-column"),x=c("el-table"),g=c("el-card"),u=c("el-col"),y=c("el-input"),C=c("el-form-item"),$=c("el-row"),L=c("el-form"),K=P("loading");return v(),Q("div",Y,[e($,{gutter:10},{default:a(()=>[e(u,{span:8},{default:a(()=>[e(g,{style:{height:"calc(100vh - 125px)"}},{header:a(()=>[Z,e(r,{style:{float:"right",padding:"3px 0"},link:"",type:"primary",icon:"Refresh",onClick:t[0]||(t[0]=o=>B())})]),default:a(()=>[S((v(),R(x,{data:n(b),height:n(N),"highlight-current-row":"",onRowClick:p,style:{width:"100%"}},{default:a(()=>[e(i,{label:"序号",width:"60",type:"index"}),e(i,{label:"缓存名称",align:"center",prop:"cacheName","show-overflow-tooltip":!0,formatter:H}),e(i,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),e(i,{label:"操作",width:"60",align:"center","class-name":"small-padding fixed-width"},{default:a(o=>[e(r,{link:"",type:"primary",icon:"Delete",onClick:j=>D(o.row)},null,8,["onClick"])]),_:1})]),_:1},8,["data","height"])),[[K,n(f)]])]),_:1})]),_:1}),e(u,{span:8},{default:a(()=>[e(g,{style:{height:"calc(100vh - 125px)"}},{header:a(()=>[ee,e(r,{style:{float:"right",padding:"3px 0"},link:"",type:"primary",icon:"Refresh",onClick:t[1]||(t[1]=o=>F())})]),default:a(()=>[S((v(),R(x,{data:n(k),height:n(N),"highlight-current-row":"",onRowClick:A,style:{width:"100%"}},{default:a(()=>[e(i,{label:"序号",width:"60",type:"index"}),e(i,{label:"缓存键名",align:"center","show-overflow-tooltip":!0,formatter:U}),e(i,{label:"操作",width:"60",align:"center","class-name":"small-padding fixed-width"},{default:a(o=>[e(r,{link:"",type:"primary",icon:"Delete",onClick:j=>O(o.row)},null,8,["onClick"])]),_:1})]),_:1},8,["data","height"])),[[K,n(_)]])]),_:1})]),_:1}),e(u,{span:8},{default:a(()=>[e(g,{bordered:!1,style:{height:"calc(100vh - 125px)"}},{header:a(()=>[ae,e(r,{style:{float:"right",padding:"3px 0"},link:"",type:"primary",icon:"Refresh",onClick:t[2]||(t[2]=o=>I())},{default:a(()=>[W("清理全部")]),_:1})]),default:a(()=>[e(L,{model:n(s)},{default:a(()=>[e($,{gutter:32},{default:a(()=>[e(u,{offset:1,span:22},{default:a(()=>[e(C,{label:"缓存名称:",prop:"cacheName"},{default:a(()=>[e(y,{modelValue:n(s).cacheName,"onUpdate:modelValue":t[3]||(t[3]=o=>n(s).cacheName=o),readOnly:!0},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{offset:1,span:22},{default:a(()=>[e(C,{label:"缓存键名:",prop:"cacheKey"},{default:a(()=>[e(y,{modelValue:n(s).cacheKey,"onUpdate:modelValue":t[4]||(t[4]=o=>n(s).cacheKey=o),readOnly:!0},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{offset:1,span:22},{default:a(()=>[e(C,{label:"缓存内容:",prop:"cacheValue"},{default:a(()=>[e(y,{modelValue:n(s).cacheValue,"onUpdate:modelValue":t[5]||(t[5]=o=>n(s).cacheValue=o),type:"textarea",rows:8,readOnly:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})])}}});export{ce as default};
