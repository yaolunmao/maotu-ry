import{r as T,d as H,T as K,f as u,o as d,k as V,w as l,n as o,h as e,i as w,m as U,K as N,L as v,c as y,I as W,H as $,l as I}from"./index-F5mM8V04.js";import{l as G}from"./menu-AZkeMNoc.js";const J=I("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),Q=I("h4",{class:"form-header"},"其他信息",-1),R=I("h4",{class:"form-header"},"关联信息",-1),Z={__name:"genInfoForm",props:{info:{type:Object,default:null},tables:{type:Array,default:null}},setup(t){const g=t,q=T([]),F=T([]),{proxy:P}=H(),M=T({tplCategory:[{required:!0,message:"请选择生成模板",trigger:"blur"}],packageName:[{required:!0,message:"请输入生成包路径",trigger:"blur"}],moduleName:[{required:!0,message:"请输入生成模块名",trigger:"blur"}],businessName:[{required:!0,message:"请输入生成业务名",trigger:"blur"}],functionName:[{required:!0,message:"请输入生成功能名",trigger:"blur"}]});function B(c){g.info.subTableFkName=""}function S(c){c!=="sub"&&(g.info.subTableName="",g.info.subTableFkName="")}function h(c){for(var a in g.tables){const b=g.tables[a].tableName;if(c===b){q.value=g.tables[a].columns;break}}}function j(){G().then(c=>{F.value=P.handleTree(c.data,"menuId")})}return K(()=>g.info.subTableName,c=>{h(c)}),j(),(c,a)=>{const b=u("el-option"),_=u("el-select"),m=u("el-form-item"),f=u("el-col"),r=u("question-filled"),i=u("el-icon"),s=u("el-tooltip"),C=u("el-input"),z=u("tree-select"),x=u("el-radio"),L=u("el-button"),O=u("el-dropdown-item"),A=u("el-dropdown-menu"),D=u("el-dropdown"),k=u("el-row"),E=u("el-form");return d(),V(E,{ref:"genInfoForm",model:t.info,rules:w(M),"label-width":"150px"},{default:l(()=>[e(k,null,{default:l(()=>[e(f,{span:12},{default:l(()=>[e(m,{prop:"tplCategory"},{label:l(()=>[o("生成模板")]),default:l(()=>[e(_,{modelValue:t.info.tplCategory,"onUpdate:modelValue":a[0]||(a[0]=n=>t.info.tplCategory=n),onChange:S},{default:l(()=>[e(b,{label:"单表（增删改查）",value:"crud"}),e(b,{label:"树表（增删改查）",value:"tree"}),e(b,{label:"主子表（增删改查）",value:"sub"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:l(()=>[e(m,{prop:"packageName"},{label:l(()=>[o(" 生成包路径 "),e(s,{content:"生成在哪个java包下，例如 com.ruoyi.system",placement:"top"},{default:l(()=>[e(i,null,{default:l(()=>[e(r)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:t.info.packageName,"onUpdate:modelValue":a[1]||(a[1]=n=>t.info.packageName=n)},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:l(()=>[e(m,{prop:"moduleName"},{label:l(()=>[o(" 生成模块名 "),e(s,{content:"可理解为子系统名，例如 system",placement:"top"},{default:l(()=>[e(i,null,{default:l(()=>[e(r)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:t.info.moduleName,"onUpdate:modelValue":a[2]||(a[2]=n=>t.info.moduleName=n)},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:l(()=>[e(m,{prop:"businessName"},{label:l(()=>[o(" 生成业务名 "),e(s,{content:"可理解为功能英文名，例如 user",placement:"top"},{default:l(()=>[e(i,null,{default:l(()=>[e(r)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:t.info.businessName,"onUpdate:modelValue":a[3]||(a[3]=n=>t.info.businessName=n)},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:l(()=>[e(m,{prop:"functionName"},{label:l(()=>[o(" 生成功能名 "),e(s,{content:"用作类描述，例如 用户",placement:"top"},{default:l(()=>[e(i,null,{default:l(()=>[e(r)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:t.info.functionName,"onUpdate:modelValue":a[4]||(a[4]=n=>t.info.functionName=n)},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[o(" 上级菜单 "),e(s,{content:"分配到指定菜单下，例如 系统管理",placement:"top"},{default:l(()=>[e(i,null,{default:l(()=>[e(r)]),_:1})]),_:1})]),default:l(()=>[e(z,{value:t.info.parentMenuId,"onUpdate:value":a[5]||(a[5]=n=>t.info.parentMenuId=n),options:w(F),objMap:{value:"menuId",label:"menuName",children:"children"},placeholder:"请选择系统菜单"},null,8,["value","options"])]),_:1})]),_:1}),e(f,{span:12},{default:l(()=>[e(m,{prop:"genType"},{label:l(()=>[o(" 生成代码方式 "),e(s,{content:"默认为zip压缩包下载，也可以自定义生成路径",placement:"top"},{default:l(()=>[e(i,null,{default:l(()=>[e(r)]),_:1})]),_:1})]),default:l(()=>[e(x,{modelValue:t.info.genType,"onUpdate:modelValue":a[6]||(a[6]=n=>t.info.genType=n),label:"0"},{default:l(()=>[o("zip压缩包")]),_:1},8,["modelValue"]),e(x,{modelValue:t.info.genType,"onUpdate:modelValue":a[7]||(a[7]=n=>t.info.genType=n),label:"1"},{default:l(()=>[o("自定义路径")]),_:1},8,["modelValue"])]),_:1})]),_:1}),t.info.genType=="1"?(d(),V(f,{key:0,span:24},{default:l(()=>[e(m,{prop:"genPath"},{label:l(()=>[o(" 自定义路径 "),e(s,{content:"填写磁盘绝对路径，若不填写，则生成到当前Web项目下",placement:"top"},{default:l(()=>[e(i,null,{default:l(()=>[e(r)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:t.info.genPath,"onUpdate:modelValue":a[9]||(a[9]=n=>t.info.genPath=n)},{append:l(()=>[e(D,null,{dropdown:l(()=>[e(A,null,{default:l(()=>[e(O,{onClick:a[8]||(a[8]=n=>t.info.genPath="/")},{default:l(()=>[o("恢复默认的生成基础路径")]),_:1})]),_:1})]),default:l(()=>[e(L,{type:"primary"},{default:l(()=>[o(" 最近路径快速选择 "),J]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):U("",!0)]),_:1}),t.info.tplCategory=="tree"?(d(),y(N,{key:0},[Q,$(e(k,null,{default:l(()=>[e(f,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[o(" 树编码字段 "),e(s,{content:"树显示的编码字段名， 如：dept_id",placement:"top"},{default:l(()=>[e(i,null,{default:l(()=>[e(r)]),_:1})]),_:1})]),default:l(()=>[e(_,{modelValue:t.info.treeCode,"onUpdate:modelValue":a[10]||(a[10]=n=>t.info.treeCode=n),placeholder:"请选择"},{default:l(()=>[(d(!0),y(N,null,v(t.info.columns,(n,p)=>(d(),V(b,{key:p,label:n.columnName+"："+n.columnComment,value:n.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[o(" 树父编码字段 "),e(s,{content:"树显示的父编码字段名， 如：parent_Id",placement:"top"},{default:l(()=>[e(i,null,{default:l(()=>[e(r)]),_:1})]),_:1})]),default:l(()=>[e(_,{modelValue:t.info.treeParentCode,"onUpdate:modelValue":a[11]||(a[11]=n=>t.info.treeParentCode=n),placeholder:"请选择"},{default:l(()=>[(d(!0),y(N,null,v(t.info.columns,(n,p)=>(d(),V(b,{key:p,label:n.columnName+"："+n.columnComment,value:n.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[o(" 树名称字段 "),e(s,{content:"树节点的显示名称字段名， 如：dept_name",placement:"top"},{default:l(()=>[e(i,null,{default:l(()=>[e(r)]),_:1})]),_:1})]),default:l(()=>[e(_,{modelValue:t.info.treeName,"onUpdate:modelValue":a[12]||(a[12]=n=>t.info.treeName=n),placeholder:"请选择"},{default:l(()=>[(d(!0),y(N,null,v(t.info.columns,(n,p)=>(d(),V(b,{key:p,label:n.columnName+"："+n.columnComment,value:n.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},512),[[W,t.info.tplCategory=="tree"]])],64)):U("",!0),t.info.tplCategory=="sub"?(d(),y(N,{key:1},[R,e(k,null,{default:l(()=>[e(f,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[o(" 关联子表的表名 "),e(s,{content:"关联子表的表名， 如：sys_user",placement:"top"},{default:l(()=>[e(i,null,{default:l(()=>[e(r)]),_:1})]),_:1})]),default:l(()=>[e(_,{modelValue:t.info.subTableName,"onUpdate:modelValue":a[13]||(a[13]=n=>t.info.subTableName=n),placeholder:"请选择",onChange:B},{default:l(()=>[(d(!0),y(N,null,v(t.tables,(n,p)=>(d(),V(b,{key:p,label:n.tableName+"："+n.tableComment,value:n.tableName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[o(" 子表关联的外键名 "),e(s,{content:"子表关联的外键名， 如：user_id",placement:"top"},{default:l(()=>[e(i,null,{default:l(()=>[e(r)]),_:1})]),_:1})]),default:l(()=>[e(_,{modelValue:t.info.subTableFkName,"onUpdate:modelValue":a[14]||(a[14]=n=>t.info.subTableFkName=n),placeholder:"请选择"},{default:l(()=>[(d(!0),y(N,null,v(w(q),(n,p)=>(d(),V(b,{key:p,label:n.columnName+"："+n.columnComment,value:n.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})],64)):U("",!0)]),_:1},8,["model","rules"])}}};export{Z as default};
